From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Jake Bailey <5341706+jakebailey@users.noreply.github.com>
Date: Tue, 4 Oct 2022 21:16:06 -0700
Subject: [PATCH] Add a --bundle=false variant to CI

---
 .github/workflows/ci.yml | 24 +++++++++++++++++++++++-
 1 file changed, 23 insertions(+), 1 deletion(-)

diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
index bf6cb01228..e1467cc471 100644
--- a/.github/workflows/ci.yml
+++ b/.github/workflows/ci.yml
@@ -21,6 +21,13 @@ jobs:
           - "*"
           - lts/*
           - lts/-1
+        bundle:
+          - "true"
+        include:
+          - node-version: "*"
+            bundle: "false"
+
+    name: Test Node ${{ matrix.node-version }} with --bundle=${{ matrix.bundle }}
 
     steps:
     - uses: actions/checkout@v3
@@ -32,7 +39,7 @@ jobs:
     - run:  npm ci
 
     - name: Tests
-      run:  npm test
+      run:  npm run test -- --bundle=${{ matrix.bundle }}
 
   lint:
     runs-on: ubuntu-latest
@@ -68,6 +75,21 @@ jobs:
     - name: Validate the browser can import TypeScript
       run: gulp test-browser-integration
 
+  typecheck:
+    runs-on: ubuntu-latest
+
+    steps:
+    - uses: actions/checkout@v3
+    - uses: actions/setup-node@v3
+      with:
+        node-version: "*"
+        check-latest: true
+    - run:  npm ci
+
+    - name: Build src
+      run: npx hereby build-src
+
+
   misc:
     runs-on: ubuntu-latest
 
-- 
2.38.0

